{
  "AWSTemplateFormatVersion": "2010-09-09",
  "Description": "Creates an AutoScale group",
  "Parameters": {
    "DesiredCapacity": {
      "Description": "Number of desired instances.",
      "Type": "Number",
      "Default": "2"
    },
    "MinSize": {
      "Description": "Minimum number of instances.",
      "Type": "Number",
      "Default": "2"
    },
    "MaxSize": {
      "Description": "Maximum number of instances.",
      "Type": "Number",
      "Default": "2"
    },
    "AvailabilityZones": {
      "Description": "AZs you wish to use for the Auto Scale Group.",
      "Type": "CommaDelimitedList"
    },
    "MinInstancesInService": {
      "Description": "The minimum number of instances that must be in service within the auto-scaling group while obsolete instances are being terminated.",
      "Type": "Number",
      "Default": "1"
    },
    "MaxBatchSize": {
      "Description": "The maximum number of instances that are terminated at a given time.",
      "Type": "Number",
      "Default": "1"
    },
    "PauseTime": {
      "Description": "The amount of time to pause before changes are made to a resource, for example, before adding or removing auto-scaling instances when scaling up or terminating instances in an auto-scaling group.",
      "Type": "String",
      "Default": "PT0S"
    },
    "LaunchConfig": {
      "Description": "Name of the Launch Configuration to use.",
      "Type": "String"
    },  
    "LoadBalancerNames": {
      "Description": "Name of the ELBs to use.",
      "Type": "String"
    },
    "Subnets" : {
          "Type" : "CommaDelimitedList",
          "Description" : "The list of SubnetIds in your Virtual Private Cloud (VPC)"
        }                       
  },

  "Resources": {

    "WebServerGroup" : {
       "UpdatePolicy" : {
          "AutoScalingRollingUpdate" : {
             "MinInstancesInService" : { "Ref": "MinInstancesInService"},
             "MaxBatchSize" : { "Ref": "MaxBatchSize"},
             "PauseTime" : { "Ref": "PauseTime"}
          }
       }, 
       "Type" : "AWS::AutoScaling::AutoScalingGroup",
       "Properties" : {
          "AvailabilityZones" : { "Ref": "AvailabilityZones"},
          "LaunchConfigurationName" : { "Ref" : "LaunchConfig" },
          "DesiredCapacity": { "Ref" : "DesiredCapacity" },
          "MinSize" : { "Ref" : "MinSize" },
          "MaxSize" : { "Ref" : "MaxSize" },
          "VPCZoneIdentifier" : { "Ref" : "Subnets" },
          "LoadBalancerNames" : [ { "Ref" : "LoadBalancerNames" } ]
       }
    }
  },
  "Outputs" : {
    "AutoScaleGroup" : {
      "Description" : "ID of the AutoScale Group that was created.",
      "Value" : { "Ref" : "WebServerGroup" }
    }
  }
}